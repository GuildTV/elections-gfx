<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">

    <link rel="stylesheet" href="public/css/app.css" />
  </head>

  <body>
  <!-- <div style="background:url('public/img/template/graph-empty.jpg') no-repeat center center fixed; background-size: cover; position: absolute; float: left; top: 0px; left: 0px; width: 100vw; height: 100vh; z-index: -200;"></div> -->
    <div class="main">
      <div class="winningCandidateContainer">
        <div class="dataSide stats">
        </div>
        <div class="imageSide">
          <div id="chartLabels"></div>
          <div id="chartWrapper"></div>
        </div>
      </div>

      <h1 id='graphRoleTitle'></h1>

    </div> <!-- / .main -->

    <!-- Scripts -->
    <script type="text/javascript" src="public/lib/socket.io-client/socket.io.js"></script>
    <script type="text/javascript" src="public/lib/Chart.js/Chart.min.js"></script>
    <script type="text/javascript" src="public/lib/Chart.HorizontalBar.js/Chart.HorizontalBar.js"></script>
    <script type="text/javascript" src="public/simple-js/graph.js"></script>
    <script type="text/javascript">

      function stop(){
        document.querySelector('body').style.display = "none";
      }

      function play(str){
        window.socket = io(window.xmlServer);
        window.socket.on('load', Graphs.initialLoad);
        window.socket.on('eliminate', Graphs.socketEliminate);
        window.socket.on('vote', Graphs.socketVote);

        window.socket.on('connect', function(){
          window.socket.emit('load', { role: window.xmlId });
        });
      }

      function update(str){
        var xml = (new DOMParser()).parseFromString(str,"text/xml");
        var id = window.xmlId = xml.querySelector('#id #text').getAttribute('value');
        var server = window.xmlServer = xml.querySelector('#server #text').getAttribute('value');

        console.log(id, server);
      }
      
      //update("<templateData><componentData id=\"id\"><data id=\"text\" value=\"c7cbcb39-827a-4c78-bdae-2e1f91af597f\" /></componentData><componentData id=\"server\"><data id=\"text\" value=\"http://localhost:3355\" /></templateData>");
      //play();


    </script>
  </body>
</html>